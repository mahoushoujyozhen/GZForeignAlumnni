var R=Object.defineProperty,K=Object.defineProperties;var Q=Object.getOwnPropertyDescriptors;var c=Object.getOwnPropertySymbols;var X=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable;var k=(e,l,a)=>l in e?R(e,l,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[l]=a,C=(e,l)=>{for(var a in l||(l={}))X.call(l,a)&&k(e,a,l[a]);if(c)for(var a of c(l))Z.call(l,a)&&k(e,a,l[a]);return e},$=(e,l)=>K(e,Q(l));import{x as L,b as A,j as s,V as M,l as w,W as _,m as d,E as x,r as F,y as ee,o as m,d as f,e as r,f as u,g as i,h as v,t as le,F as D,k as U,p as oe,i as ue,w as h}from"./vendor.e1400650.js";import{_ as T,b as ne}from"./index.11841eca.js";const ae=L({mounted(){this.getUserInfo()},props:{userId:Number},setup(e){const l=e.userId;console.log("userID",l);const a=new WebSocket("ws://mac.gzhu.edu.cn/alumni/api/message/ws?id=-1"),t={fieldPlaceholderTextColor:"#333333",cellGroupInsetTitlePadding:"0",cellGroupTitleFontSize:".4533rem",fieldWordLimitFontSize:".4267rem",fieldLabelWidth:"5em"},V=A("\u5BA1\u6838\u901A\u8FC7"),g=A(!1),n=A(3),p="api/file/download",I="http://mac.gzhu.edu.cn/alumni/resources/",B=s([]),E=s([]),y=s([]),o=s([]),P=s([]),S=s([]),q=O=>x(O).format("YYYY-MM-DD"),j=s([]),z=s([]),N=s([]),W=s([]),Y=s([]),G=s([]),H=s([]),J=s([]);return s($(C({},M(e)),{userId:l,formInfo:W,essentialInfo:Y,educationInfo:G,supportialMaterial:H,workInfo:J,themeVars:t,comment:V,focus:g,dateTime:q,status:n,filePeople:B,srcListPeople:E,fileUnit:y,srcListUnit:o,fileMaterial:P,srcListMaterial:S,displayUrl:I,downloadUrl:p,srcList:j,srcList1:z,srcList2:N,datas1:[],websocket:a}))},methods:{async async1(e,l){const a=new FormData;a.append("id",e),console.log("form:",a.getAll("id"));const t=await w.post(this.downloadUrl,a);console.log("\u56FE\u7247\u7ED3\u679C",t),t.data.statusCode===2e3&&(this.srcList.push(t.data.details),console.log("srcList:",this.srcList),this.async2(l))},async async2(e){const l=new FormData;l.append("id",e);const a=await w.post(this.downloadUrl,l);a.data.statusCode===2e3&&(this.srcList1.push(a.data.details),this.async3(this.fileMaterial))},async async3(e){const l=new FormData;l.append("id",e);const a=await w.post(this.downloadUrl,l);a.data.statusCode===2e3&&this.srcList2.push(a.data.details)},showToast:function(){let e=3;const l=_.loading({duration:0,forbidClick:!0,message:`\u63D0\u4EA4\u6210\u529F
3\u79D2\u540E\u8FD4\u56DE`}),a=setInterval(()=>{e--,e?l.message=`\u63D0\u4EA4\u6210\u529F
${e}\u79D2\u540E\u8FD4\u56DE`:(clearInterval(a),l.clear())},1e3),V={ids:[this.userId.toString()],title:"\u5BA1\u6838\u7ED3\u679C",content:this.comment,time:Date.now()};this.websocket.send(JSON.stringify(V))},failPassed:function(){if(!this.comment){d.warning("\u9000\u56DE\u4FEE\u6539\u610F\u89C1\u4E0D\u80FD\u4E3A\u7A7A\uFF01");return}if(this.comment=="\u5BA1\u6838\u901A\u8FC7"){d.warning("\u8BF7\u8F93\u5165\u9000\u56DE\u4FEE\u6539\u610F\u89C1"),this.comment="";return}this.status=2,this.submit(),setTimeout(()=>{this.$router.go(-1),this.$router.replace("/pendingAuditPage")},3e3)},input:function(){this.comment&&(this.errorMsg="")},passed:function(){if(this.comment==""){d.warning("\u5BA1\u6838\u610F\u89C1\u4E0D\u80FD\u4E3A\u7A7A");return}this.status=1,this.submit(),setTimeout(()=>{this.$router.go(-1),this.$router.replace("/pendingAuditPage")},1e3)},getUserInfo:function(){console.log("\u7528\u6237Id",this.userId);let a=`api/admin/userInfo?${`id=${this.userId}`}`;fetch(a,{method:"GET",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:new Headers({"Content-Type":"application/json"}),redirect:"follow"}).then(t=>t.json()).then(t=>{if(t.status==-999){d.warn("\u8D26\u53F7\u672A\u767B\u5F55\uFF0C\u8BF7\u5148\u767B\u5F55"),this.$router.push("login");return}if(t.status==-1999){d.warn("\u7BA1\u7406\u5458\u8D26\u53F7\u672A\u767B\u5F55\uFF0C\u8BF7\u5148\u767B\u5F55"),this.$router.push("login");return}console.log(t),console.log(t),this.formInfo=t.data,console.log("formInfo",this.formInfo),this.essentialInfo=t.data.essential_info,this.educationInfo=t.data.education_info,this.supportialMaterial=t.data.supportial_material,this.workInfo=t.data.work_info,this.filePeople=t.data.supportial_material.Id_Peo,this.fileUnit=t.data.supportial_material.Id_Ini,this.fileMaterial=t.data.file_id,this.async1(this.filePeople,this.fileUnit)})},submit:function(){let e=[];e.push(`id=${this.userId}`),e.push(`opinion=${this.comment}`),e.push(`status=${this.status}`);let a=`api/admin/opinionSubmit?${e.join("&")}`;fetch(a,{method:"PUT",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:new Headers({"Content-Type":"application/json"}),redirect:"follow"}).then(t=>t.json()).then(t=>{if(t.status==-999){d.warn("\u8D26\u53F7\u672A\u767B\u5F55\uFF0C\u8BF7\u5148\u767B\u5F55"),this.$router.push("login");return}if(t.status==-1999){d.warn("\u7BA1\u7406\u5458\u8D26\u53F7\u672A\u767B\u5F55\uFF0C\u8BF7\u5148\u767B\u5F55"),this.$router.push("login");return}if(t.status==200){d.success("\u5BA1\u6838\u7ED3\u679C\u63D0\u4EA4\u6210\u529F");const g={ids:[this.userId.toString()],title:"\u5BA1\u6838\u7ED3\u679C",content:this.comment,time:Date.now()};this.websocket.send(JSON.stringify(g));return}else{d.error("\u5BA1\u6838\u7ED3\u679C\u63D0\u4EA4\u5931\u8D25\uFF0C\u8BF7\u5237\u65B0\u91CD\u8BD5");return}})}}}),b=e=>(oe("data-v-18fc5878"),e=e(),ue(),e),te={class:"bg"},se={class:"infoList"},ie=b(()=>r("div",{class:"groupTitle"},"\u57FA\u672C\u4FE1\u606F",-1)),de={class:"imgWrapper"},re={class:"imgWrapper"},me=b(()=>r("div",{class:"groupTitle"},"\u6559\u80B2\u7ECF\u5386",-1)),fe={class:"imgWrapper"},pe=b(()=>r("div",{class:"groupTitle"},"\u5DE5\u4F5C\u7ECF\u5386",-1)),Fe=b(()=>r("div",{class:"groupTitle"},"\u5BA1\u6838\u610F\u89C1",-1)),Ve={class:"btn"},Ie=v("\u901A\u8FC7"),ge=v("\u9000\u56DE\u4FEE\u6539");function ye(e,l,a,t,V,g){const n=F("van-field"),p=F("van-image"),I=F("van-cell-group"),B=F("van-button"),E=F("van-config-provider"),y=ee("viewer");return m(),f("div",te,[r("div",se,[u(E,{"theme-vars":e.themeVars},{default:i(()=>[ie,u(I,{inset:""},{default:i(()=>[u(n,{modelValue:e.formInfo.phone,"onUpdate:modelValue":l[0]||(l[0]=o=>e.formInfo.phone=o),label:"\u624B\u673A\u53F7",readonly:"",class:"fieldFont"},null,8,["modelValue"]),u(n,{modelValue:e.formInfo.sex,"onUpdate:modelValue":l[1]||(l[1]=o=>e.formInfo.sex=o),label:"\u6027\u522B",readonly:!0,class:"fieldFont"},null,8,["modelValue"]),u(n,{modelValue:e.formInfo.idCard,"onUpdate:modelValue":l[2]||(l[2]=o=>e.formInfo.idCard=o),readonly:"",class:"fieldFont"},{label:i(()=>[v(le(e.formInfo.idcard_type),1)]),_:1},8,["modelValue"]),u(n,{modelValue:e.formInfo.email,"onUpdate:modelValue":l[3]||(l[3]=o=>e.formInfo.email=o),label:"\u7535\u5B50\u90AE\u4EF6",readonly:"",class:"fieldFont"},null,8,["modelValue"]),u(n,{modelValue:e.essentialInfo.education,"onUpdate:modelValue":l[4]||(l[4]=o=>e.essentialInfo.education=o),label:"\u5B66\u5386",readonly:"",class:"fieldFont"},null,8,["modelValue"]),u(n,{modelValue:e.formInfo.birthday,"onUpdate:modelValue":l[5]||(l[5]=o=>e.formInfo.birthday=o),label:"\u51FA\u751F\u5E74\u6708\u65E5",maxlength:"10",readonly:!0,class:"fieldFont"},null,8,["modelValue"]),u(n,{modelValue:e.essentialInfo.nation,"onUpdate:modelValue":l[6]||(l[6]=o=>e.essentialInfo.nation=o),label:"\u6C11\u65CF",readonly:!0,class:"fieldFont"},null,8,["modelValue"]),u(n,{modelValue:e.essentialInfo.native_place,"onUpdate:modelValue":l[7]||(l[7]=o=>e.essentialInfo.native_place=o),label:"\u7C4D\u8D2F",readonly:!0,class:"fieldFont"},null,8,["modelValue"]),u(n,{modelValue:e.essentialInfo.birth_place,"onUpdate:modelValue":l[8]||(l[8]=o=>e.essentialInfo.birth_place=o),label:"\u51FA\u751F\u5730",readonly:!0,class:"fieldFont"},null,8,["modelValue"]),u(n,{modelValue:e.essentialInfo.political,"onUpdate:modelValue":l[9]||(l[9]=o=>e.essentialInfo.political=o),label:"\u653F\u6CBB\u9762\u8C8C",readonly:!0,class:"fieldFont"},null,8,["modelValue"]),u(n,{modelValue:e.essentialInfo.overseas_permanent,"onUpdate:modelValue":l[10]||(l[10]=o=>e.essentialInfo.overseas_permanent=o),label:"\u56FD\uFF08\u5883\uFF09\u5916\u6C38\u4E45\u5C45\u7559\u6743",readonly:"",class:"fieldFont"},null,8,["modelValue"]),u(n,{modelValue:e.essentialInfo.level,"onUpdate:modelValue":l[11]||(l[11]=o=>e.essentialInfo.level=o),label:"\u5916\u8BED\u7B49\u7EA7",readonly:!0,class:"fieldFont"},null,8,["modelValue"]),u(n,{modelValue:e.essentialInfo.translation,"onUpdate:modelValue":l[12]||(l[12]=o=>e.essentialInfo.translation=o),label:"\u662F\u5426\u80FD\u62C5\u4EFB\u7FFB\u8BD1",readonly:!0,class:"fieldFont"},null,8,["modelValue"]),u(n,{modelValue:e.essentialInfo.married_status,"onUpdate:modelValue":l[13]||(l[13]=o=>e.essentialInfo.married_status=o),label:"\u5A5A\u59FB\u72B6\u51B5",readonly:!0,class:"fieldFont"},null,8,["modelValue"]),u(n,{modelValue:e.essentialInfo.home_phone,"onUpdate:modelValue":l[14]||(l[14]=o=>e.essentialInfo.home_phone=o),label:"\u5BB6\u5EAD\u7535\u8BDD",readonly:!0,class:"fieldFont"},null,8,["modelValue"]),u(n,{modelValue:e.essentialInfo.address,"onUpdate:modelValue":l[15]||(l[15]=o=>e.essentialInfo.address=o),label:"\u901A\u8BAF\u5730\u5740",readonly:!0,class:"fieldFont"},null,8,["modelValue"]),u(n,{modelValue:e.essentialInfo.postal_code,"onUpdate:modelValue":l[16]||(l[16]=o=>e.essentialInfo.postal_code=o),label:"\u90AE\u653F\u7F16\u7801",readonly:!0,class:"fieldFont"},null,8,["modelValue"]),u(n,{modelValue:e.essentialInfo.fax,"onUpdate:modelValue":l[17]||(l[17]=o=>e.essentialInfo.fax=o),label:"\u4F20\u771F",readonly:!0,class:"fieldFont"},null,8,["modelValue"]),u(n,{modelValue:e.essentialInfo.hobby,"onUpdate:modelValue":l[18]||(l[18]=o=>e.essentialInfo.hobby=o),label:"\u5174\u8DA3\u7231\u597D",readonly:!0,class:"fieldFont"},null,8,["modelValue"]),u(n,{modelValue:e.essentialInfo.social_appointments,"onUpdate:modelValue":l[19]||(l[19]=o=>e.essentialInfo.social_appointments=o),label:"\u4EBA\u5927\u653F\u534F\u53CA\u5176\u4ED6\u793E\u4F1A\u517C\u804C",readonly:!0,class:"fieldFont"},null,8,["modelValue"]),u(n,{label:"\u63A8\u8350\u4EBA\u7B7E\u7AE0:",readonly:!0,class:"fieldFont"},{input:i(()=>[r("div",de,[(m(!0),f(D,null,U(e.srcList[0],o=>h((m(),f("div",{key:o},[u(p,{fit:"cover",src:e.displayUrl+o},null,8,["src"])])),[[y,{movable:!1}]])),128))])]),_:1}),u(n,{modelValue:e.supportialMaterial.relation,"onUpdate:modelValue":l[20]||(l[20]=o=>e.supportialMaterial.relation=o),label:"\u4E0E\u4ECB\u7ECD\u4EBA\u5173\u7CFB",readonly:!0,class:"fieldFont"},null,8,["modelValue"]),u(n,{modelValue:e.supportialMaterial.content,"onUpdate:modelValue":l[21]||(l[21]=o=>e.supportialMaterial.content=o),label:"\u4ECB\u7ECD\u5355\u4F4D\u610F\u89C1",readonly:!0,class:"fieldFont"},null,8,["modelValue"]),u(n,{label:"\u63A8\u8350\u5355\u4F4D\u7B7E\u7AE0:",readonly:!0,class:"fieldFont"},{input:i(()=>[r("div",re,[(m(!0),f(D,null,U(e.srcList1[0],o=>h((m(),f("div",{key:o},[u(p,{fit:"cover",src:e.displayUrl+o},null,8,["src"])])),[[y,{movable:!1}]])),128))])]),_:1})]),_:1}),me,u(I,{inset:"",style:{margin:"0"}},{default:i(()=>[u(n,{modelValue:e.educationInfo.degree,"onUpdate:modelValue":l[22]||(l[22]=o=>e.educationInfo.degree=o),label:"\u5B66\u4F4D",readonly:!0,class:"fieldFont"},null,8,["modelValue"]),u(n,{modelValue:e.educationInfo.major,"onUpdate:modelValue":l[23]||(l[23]=o=>e.educationInfo.major=o),label:"\u5B66\u79D1/\u4E13\u4E1A",readonly:!0,class:"fieldFont"},null,8,["modelValue"]),u(n,{modelValue:e.educationInfo.college,"onUpdate:modelValue":l[24]||(l[24]=o=>e.educationInfo.college=o),label:"\u5B66\u6821\u540D\u79F0",readonly:!0,class:"fieldFont"},null,8,["modelValue"]),u(n,{modelValue:e.educationInfo.region,"onUpdate:modelValue":l[25]||(l[25]=o=>e.educationInfo.region=o),label:"\u5B66\u6821\u6240\u5728\u5730\u548C\u5730\u533A",readonly:!0,class:"fieldFont"},null,8,["modelValue"]),u(n,{modelValue:e.educationInfo.begin_time,"onUpdate:modelValue":l[26]||(l[26]=o=>e.educationInfo.begin_time=o),label:"\u8D77\u59CB\u5728\u6821\u65F6\u95F4",readonly:!0,class:"fieldFont"},null,8,["modelValue"]),u(n,{modelValue:e.educationInfo.end_time,"onUpdate:modelValue":l[27]||(l[27]=o=>e.educationInfo.end_time=o),label:"\u7ED3\u675F\u5728\u6821\u65F6\u95F4",readonly:!0,class:"fieldFont"},null,8,["modelValue"]),u(n,{modelValue:e.formInfo.study_type,"onUpdate:modelValue":l[28]||(l[28]=o=>e.formInfo.study_type=o),label:"\u662F\u5426\u7559\u5B66",readonly:!0,class:"fieldFont"},null,8,["modelValue"]),u(n,{label:"\u8BC1\u660E\u8D44\u6599\uFF08\u5B66\u5386\u5B66\u4F4D\u3001\u7559\u5B66\u56DE\u56FD\u4EBA\u5458\uFF0C\u6BD5\u4E1A\u8BC1\u4E66\u7B49\u8D44\u6599\uFF09:",readonly:!0,class:"fieldFont"},{input:i(()=>[r("div",fe,[(m(!0),f(D,null,U(e.srcList2[0],o=>h((m(),f("div",{key:o,class:"img"},[u(p,{fit:"cover",src:e.displayUrl+o},null,8,["src"])])),[[y,{movable:!1}]])),128))])]),_:1})]),_:1}),pe,u(I,{inset:"",style:{margin:"0"}},{default:i(()=>[u(n,{modelValue:e.workInfo.position,"onUpdate:modelValue":l[29]||(l[29]=o=>e.workInfo.position=o),label:"\u804C\u4F4D",readonly:!0,class:"fieldFont"},null,8,["modelValue"]),u(n,{modelValue:e.workInfo.position_title,"onUpdate:modelValue":l[30]||(l[30]=o=>e.workInfo.position_title=o),label:"\u804C\u79F0",readonly:!0,class:"fieldFont"},null,8,["modelValue"]),u(n,{modelValue:e.workInfo.professional,"onUpdate:modelValue":l[31]||(l[31]=o=>e.workInfo.professional=o),label:"\u4ECE\u4E8B\u4E13\u4E1A",readonly:!0,class:"fieldFont"},null,8,["modelValue"]),u(n,{modelValue:e.workInfo.organization,"onUpdate:modelValue":l[32]||(l[32]=o=>e.workInfo.organization=o),label:"\u673A\u6784\u540D\u79F0",readonly:!0,class:"fieldFont"},null,8,["modelValue"]),u(n,{modelValue:e.workInfo.organization_nature,"onUpdate:modelValue":l[33]||(l[33]=o=>e.workInfo.organization_nature=o),label:"\u673A\u6784\u6027\u8D28",readonly:!0,class:"fieldFont"},null,8,["modelValue"]),u(n,{modelValue:e.workInfo.or_telephone,"onUpdate:modelValue":l[34]||(l[34]=o=>e.workInfo.or_telephone=o),label:"\u673A\u6784\u7535\u8BDD",readonly:!0,class:"fieldFont"},null,8,["modelValue"]),u(n,{modelValue:e.workInfo.region,"onUpdate:modelValue":l[35]||(l[35]=o=>e.workInfo.region=o),label:"\u673A\u6784\u6240\u5728\u56FD\u5BB6\u548C\u5730\u533A",readonly:!0,class:"fieldFont"},null,8,["modelValue"]),u(n,{modelValue:e.workInfo.begin_time,"onUpdate:modelValue":l[36]||(l[36]=o=>e.workInfo.begin_time=o),label:"\u5DE5\u4F5C\u8D77\u59CB\u65F6\u95F4",maxlength:"11",readonly:!0,class:"fieldFont"},null,8,["modelValue"]),u(n,{modelValue:e.workInfo.end_time,"onUpdate:modelValue":l[37]||(l[37]=o=>e.workInfo.end_time=o),label:"\u5DE5\u4F5C\u7ED3\u675F\u65F6\u95F4",maxlength:"11",readonly:!0,class:"fieldFont"},null,8,["modelValue"])]),_:1}),Fe,u(I,{inset:"",style:{margin:"0"}},{default:i(()=>[u(n,{modelValue:e.comment,"onUpdate:modelValue":[l[38]||(l[38]=o=>e.comment=o),e.input],rows:"5",autosize:!0,label:"\u5BA1\u6838\u610F\u89C1",type:"textarea",placeholder:"\u8BF7\u8F93\u5165\u5BA1\u6838\u610F\u89C1",class:"fieldFont"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),r("div",Ve,[u(B,{type:"primary",class:"passBtn",onClick:e.passed},{default:i(()=>[Ie]),_:1},8,["onClick"]),u(B,{type:"danger",class:"unpassBtn",onClick:e.failPassed,plain:""},{default:i(()=>[ge]),_:1},8,["onClick"])])]),_:1},8,["theme-vars"])])])}var Be=T(ae,[["render",ye],["__scopeId","data-v-18fc5878"]]);const De=L({name:"auditPage",beforeMount(){this.getUserId()},setup(){const e=s({userId:0});return C({},M(e))},components:{ManageNav:ne,auditForm:Be},methods:{getUserId(){this.userId=this.$route.query.userId}}});function be(e,l,a,t,V,g){const n=F("ManageNav"),p=F("auditForm");return m(),f(D,null,[u(n),u(p,{userId:e.userId},null,8,["userId"])],64)}var we=T(De,[["render",be]]);export{we as default};
